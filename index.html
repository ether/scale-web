<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>Etherpad Scale Calculator</title>
</head>

<body>

<p>This page is designed to help you understand your hardware requirements for Deploying Etherpad at scale</p>

<p>Note: The performance here is a rough guideline, we hope(not tested) over the coming months (by 2021) to have a roughly 5x improvement in performance land.</p>
<p>Note: Stability can be improved by increasing memory heap size availability if memory availability runs low</p>
<p>Note: Each etherpad instance/node can currently handle ~10k msgs/sec</p>
<p>Note: We're yet to test if multiple instances play well on a single CPU (across multiple cores</p>
<p>Note: IP addresses can be a limiting factor due to maximizing TCP connectivity per address</p>
<p>Note: Productivity tends to drop with more than 3 concurrent authors on a pad - Details at https://github.com/ether/research-papers</p>
<p>Note: We haven't tested Database performance with load across multiple nodes as of yet</p>



<h1>Input</h1>
<form>
<p>
<label for='a'>Concurrent Authors Per Pad:</label><input id='a' type='number' value=3>
</p>
<p>
<label for='l'>Lurkers Per Pad:</label><input id='l' type='number' value=10>
</p>
<p>
<label for='p'>Total Concurrent Pads:</label><input id='p' type='number' value=100>
</p>
</form>

<div id=results>
<h1>Results</h1>
<p>
Total CPU Cores(not CPUs) required: <span id=rcores></span>
</p>
<p>
Total RAM per Cores(not CPUs) required: <span id=rram></span>
</p>
<p>
Total Concurrent Authors: <span id=rtotalAuthors></span>
</p>
<p>
Total Concurrent Lurkers: <span id=rtotalLurkers></span>
</p>
</div>

<p>
Total IP addresses required?
</p>
TODO: Advice for each thing..

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="./scale.js"></script>
<script>
$(document).ready(function() {
  $("input").on("change", function(){
    let results = calculateRequirements(parseInt($('#a').val()), parseInt($('#l').val()), parseInt($('#p').val()))
console.log(results);
    $.each(results, function(id, val){
      console.log(id, val);
      $("#r"+id).text(val);
    });
  }) 
});
</script>

</body>
</html>
